<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ì™„ë²½ì— ëŒ€í•œ ì˜ë¢°</title>

<style>
:root {
  --bg: #000000;
  --text: #d0d8e4;
  --accent: #556680;
  --panel: #0B101F;
  --muted: #7a8aa1;
}

* { box-sizing: border-box; }
html, body { height: 100%; margin: 0; }

body {
  font-family: Pretendard, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background: var(--bg);
  background-image: url('background.jpg');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  color: var(--text);
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100vh;
  overflow: hidden;
  padding: 10px;
  cursor: pointer;
}

/* ë°°ê²½ ìœ„ íˆ¬ëª… ì˜¤ë²„ë ˆì´ */
#overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 200vw;
  height: 100vh;
  background-color: rgba(0,0,0,0.40);
  z-index: 0;
  pointer-events: none;
}

.stage {
  display: none;
  width: 100%;
  max-width: 770px;
  text-align: center;
  padding: 36px;
  border-radius: 5px;
  background-color: rgba(0,0,0,0.55);
  backdrop-filter: blur(2px);
  animation: fadeIn 420ms ease both;
  position: relative; 
  z-index: 1;
}
.stage.active { display: block; }

button {
  background: var(--accent);
  border: none;
  padding: 10px 20px;
  border-radius: 5px;
  color: var(--text);
  font-weight: 700;
  cursor: pointer;
  font-size: 1rem;
  transition: transform 140ms ease;
}
button:hover { transform: translateY(-3px); }

.h-title {
  font-size: 2rem;
  margin: 6px 0 15px;
  color: var(--muted);
  padding-bottom: 20px;
}
.lead {
  color: #ffff;
  margin-bottom: 18px;
  line-height: 1.7;
  padding-bottom: 20px;
  font-size: 20px;
}

/* ì• ë‹ˆë©”ì´ì…˜ */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(8px) scale(0.995); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

/* ê¹œë¹¡ì´ëŠ” ì»¤ì„œ */
@keyframes blink {
  0%, 50%, 100% { opacity: 1; }
  25%, 75% { opacity: 0; }
}
.cursor {
  display: inline-block;
  animation: blink 1s step-start infinite;
}

#explain-text {
  color: #ffff; /* ì›í•˜ëŠ” ìƒ‰ìƒ */
  font-size: 20px;
}

</style>
</head>

<body>
<audio id="bgm" src="bad.mp3" autoplay loop></audio>


<!-- ê²€ì€ìƒ‰ íˆ¬ëª… ì˜¤ë²„ë ˆì´ -->
<div id="overlay"></div>

<!-- STAGE 1 -->
<section class="stage active" id="stage-intro">
  <div class="h-title"></div>
  <div class="lead">ë‹¹ì‹ ì—ê²Œ í•œ ê°€ì§€ ì˜ë¢°ê°€ ë“¤ì–´ì™”ìŠµë‹ˆë‹¤.</div>
  <button id="btn-start">ì˜ë¢°ì¸ì˜ ë©”ì‹œì§€</button>
</section>

<!-- STAGE 2 : ì„¤ëª… ìˆœì°¨ -->
<section class="stage" id="stage-select">
  <div class="h-title"></div>
  <img src="22.png" alt="ì„¤ëª… ì´ë¯¸ì§€" style="display:block; margin:15px auto; max-width:50%; height:auto; padding-bottom: 20px;">
  <div class="lead" id="explain-text">ì²« ë²ˆì§¸ ì„¤ëª…: ìºë¦­í„°ë¥¼ ì„ íƒí•˜ë©´ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
</section>

<!-- STAGE 3 -->
<section class="stage" id="stage-result">
  <div class="h-title"></div>
  <div class="lead">ì‹œê°„ ë‚´ì— ëŠ¥ë ¥ì„ ì°¾ì•„ ì˜ë¢°ë¥¼ ì™„ì„±í•˜ì„¸ìš”.</div>
  <button class="link" id="btn-home">ëŠ¥ë ¥ ì°¾ìœ¼ëŸ¬ ê°€ê¸°</button>
</section>

<script>
/* STAGE ì „í™˜ */
function showStage(stageEl){
  document.querySelectorAll('.stage').forEach(s => s.classList.remove('active'));
  stageEl.classList.add('active');
  window.scrollTo({top:0,behavior:'smooth'});
}

function typeText(el, text, speed = 130, callback) {
  el.textContent = '';
  const cursor = document.createElement('span');
  cursor.className = 'cursor';
  cursor.textContent = '|';
  el.appendChild(cursor);

  let i = 0;

  // ğŸ”Š ë§¤ ì„¤ëª… ì‹œì‘ ì‹œ ì†Œë¦¬ ë¦¬ì…‹ & ì¬ìƒ
  keySound.currentTime = 0;
  keySound.play();

  const timer = setInterval(() => {
    if (i < text.length) {
      cursor.insertAdjacentText('beforebegin', text[i]);
      i++;
    } else {
      clearInterval(timer);
      keySound.pause();          // ğŸ”‡ íƒ€ì ëë‚˜ë©´ ë©ˆì¶¤
      keySound.currentTime = 0;
      if (callback) callback();
    }
  }, speed);
}


/* ===== ì„¤ëª… ìˆœì°¨ ===== */
const explanations = [
  "ì €ëŠ” ì‹¤íŒ¨ê°€ ë‘ë ¤ì›Œìš”. ê·¸ë˜ì„œ ì´ê±¸ í•´ê²°í•´ì¤„ 6ê°œì˜ ëŠ¥ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤.",
  "ëŠ¥ë ¥ì„ í•œ ê°€ì§€ì”© ì°¾ì„ ë•Œë§ˆë‹¤ ë‚˜ë¬´ê°€ ìë¼ë‚˜ìš”.",
  "ëŠ¥ë ¥ì„ ëª¨ë‘ ì°¾ê³  ë‚˜ë¬´ë¥¼ í‚¤ì›Œë‚´ ê¼­ ì™„ë²½í•œ ì¡´ì¬ë¥¼ ë§Œë“¤ê²ë‹ˆë‹¤.",
  "ê·¸ ì¡°ê±´ìœ¼ë¡œ í•„ìš”í•œ 6ê°€ì§€ì˜ ëŠ¥ë ¥ì„ í•¨ê»˜ ì°¾ì•„ì£¼ì„¸ìš”.",
];

let currentExplain = 0;

/* ì‹œì‘ ë²„íŠ¼ í´ë¦­ ì‹œ */
document.getElementById('btn-start').onclick = (e)=>{
  e.stopPropagation();
  currentExplain = 0;
  typeText(document.getElementById('explain-text'), explanations[currentExplain]);
  showStage(document.getElementById('stage-select'));
};

/* í™”ë©´ í´ë¦­ ì‹œ ì„¤ëª… ì „í™˜ */
document.body.addEventListener('click', ()=>{
  const stageSelect = document.getElementById('stage-select');
  if(stageSelect.classList.contains('active')){
    currentExplain++;
    if(currentExplain < explanations.length){
      typeText(document.getElementById('explain-text'), explanations[currentExplain]);
    } else {
      showStage(document.getElementById('stage-result'));
    }
  }
});

/* ê²°ê³¼ ìŠ¤í…Œì´ì§€ì—ì„œ ë²„íŠ¼ í´ë¦­ ì‹œ index.htmlë¡œ ì´ë™ */
document.getElementById('btn-home').onclick = ()=>{
  window.location.href = "index.html";
};
/* íƒ€ì ì†Œë¦¬ */
const keySound = new Audio('key.mp3');
keySound.volume = 0.6;   // í•„ìš”í•˜ë©´ ì¡°ì ˆ

const bgm = document.getElementById('bgm');
bgm.volume = 0.5;

// í˜ì´ì§€ ë¡œë“œ ì§í›„ ì¬ìƒ ì‹œë„
window.addEventListener('load', () => {
  bgm.play().catch(() => {
    // ìë™ì¬ìƒì´ ë§‰í˜”ì„ ê²½ìš°ë¥¼ ëŒ€ë¹„
    console.log('ìë™ì¬ìƒ ì°¨ë‹¨ë¨');
  });
});

</script>

</body>
</html>
